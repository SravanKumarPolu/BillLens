# Android Project Setup

This directory contains the Android-specific code for BillLens.

## Quick Start

### Prerequisites
- Android Studio (latest version)
- Android SDK (installed via Android Studio)
- Java/JDK (included with Android Studio)

### Setup Steps

1. **Install Dependencies** (if not already done)
   ```bash
   cd ..  # Go to project root
   pnpm install
   ```

2. **Open in Android Studio**
   - Open Android Studio
   - File → Open → Select this `android` folder
   - Android Studio will auto-create `local.properties` with SDK path

3. **Sync Gradle**
   - File → Sync Project with Gradle Files
   - Or click the Sync button in the toolbar
   - Wait for "BUILD SUCCESSFUL"

4. **Start Metro Bundler** (Required!)
   ```bash
   cd ..  # Go to project root
   pnpm start
   ```
   Keep this terminal open - Metro must be running!

5. **Run the App**
   - Select device/emulator from dropdown
   - Click Run button (green play icon)
   - Or: Run → Run 'app'

## Project Structure

```
android/
├── app/                    # Main app module
│   ├── build.gradle        # App build configuration
│   └── src/               # Source code
├── build.gradle           # Root build configuration
├── settings.gradle        # Project/module settings
├── gradle.properties      # Gradle properties
└── local.properties       # SDK location (auto-generated by Android Studio)
```

## Manual Linking

This project uses manual linking for pnpm compatibility. Native modules are linked in:
- `settings.gradle` - Module includes
- `app/build.gradle` - Dependencies

### Linked Modules
- `@react-native-async-storage/async-storage`
- `react-native-image-picker`
- `react-native-safe-area-context`
- `react-native-screens`

## Build Variants

- **Debug**: Development builds with debugging enabled
- **Release**: Production builds (requires keystore)

## Troubleshooting

### Sync Fails
- Check internet connection
- Verify SDK location in `local.properties`
- Try: File → Invalidate Caches → Invalidate and Restart

### Build Fails
- Ensure Metro bundler is running: `pnpm start`
- Check Logcat for errors: View → Tool Windows → Logcat
- Clean build: `./gradlew clean`

### App Crashes
- Verify Metro bundler is running
- Check all native modules are properly linked
- Review Logcat for runtime errors

## Gradle Commands

```bash
# Clean build
./gradlew clean

# Build debug APK
./gradlew assembleDebug

# Install on connected device
./gradlew installDebug

# Run tests
./gradlew test
```

## Configuration Files

- `build.gradle` - Root build config, SDK versions
- `app/build.gradle` - App-specific config, dependencies
- `settings.gradle` - Project structure, module includes
- `gradle.properties` - Gradle properties, Hermes/JSC settings
- `local.properties` - SDK location (auto-generated, gitignored)

## Notes

- **Metro bundler must be running** before launching the app
- First sync may take 5-10 minutes (downloading dependencies)
- Use Debug build variant for development
- Check Logcat for runtime errors and logs

For detailed setup instructions, see [ANDROID_STUDIO_SETUP.md](./ANDROID_STUDIO_SETUP.md)

